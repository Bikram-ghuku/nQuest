 <!DOCTYPE html>
 <html lang="en">
 <head>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <meta charset="UTF-8">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.min.js" integrity="sha384-cuYeSxntonz0PPNlHhBs68uyIAVpIIOZZ5JqeqvYYIcEL727kskC66kF92t6Xl2V" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="test_on.css">
    <script type="text/javascript" id="MathJax-script" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.0.0/es5/latest?tex-mml-chtml.js"></script>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="./scripts/questions_process.js"></script>
    <title>Test ongoing</title>
 </head>
 <body>
    
    <div class="sections">
        <div class="navgational_pan">
            <div class="user_data">
                <img src="images/user.png" alt="user">
                <img src="images/user_live.png" alt="user_live">
            </div>
            <div class="help_data">

            </div>
            <div class="q_numbers">

            </div>
        </div>
        <div class="q_palette">
            <label class="q_text">Question 1</label>
            <div class="option_a">
                <input type="radio" name="q" id="q_a" value="a" >
                <label class="q_a_lab">a</label>
            </div>
            <div class="option_b">
                <input type="radio" name="q" id="q_b" value="b">
                <label class="q_b_lab">b</label>
            </div>
            <div class="option_c">
                <input type="radio" name="q" id="q_c" value="c">
                <label class="q_c_lab">c</label>
            </div>
            <div class="option_d">
                <input type="radio" name="q" id="q_d" value="d">
                <label class="q_d_lab">d</label>
            </div>
            <br><br>
            <div class="buttons">
                <button class="btn btn-outline-secondary" id="m">Clear Option</button>
                <button class="btn btn-outline-secondary" id="smk" onclick="saveOption()">Save and Mark for review</button>
                <div class="spacer" style="padding-left:40%; display: inline-block;">
                    <button class="btn btn-primary" id="snxt">Save and Next</button>
                </div>
            </div>
        </div>
    </div>
 </body>
 <script>
    window.onload = ()=>{
        getQuestion("82023060400002")
    }

    function getQuestion(id){
            var question = document.getElementsByClassName("q_text")[0];
            var a_opt = document.getElementsByClassName("q_a_lab")[0];
            var b_opt = document.getElementsByClassName("q_b_lab")[0];
            var c_opt = document.getElementsByClassName("q_c_lab")[0];
            var d_opt = document.getElementsByClassName("q_d_lab")[0];
            var clear_opt = document.getElementById("m");
            var sve_nxt = document.getElementById("snxt");
            var rad = document.getElementsByName("q");

            for(i=0; i<rad.length; i++){
                rad[i].checked = false;
            }
    
            $.ajax({
                type: "GET",
                url: "./q_api.php?q_id="+id,
                success: (data)=>{
                    data = JSON.parse(data)
                    question.innerHTML = data[0]
                    question.id = data[1]
                    a_opt.innerHTML = data[2]
                    a_opt.id = data[3]
                    b_opt.innerHTML = data[4]
                    b_opt.id = data[5]
                    c_opt.innerHTML = data[6]
                    c_opt.id = data[7]
                    d_opt.innerHTML = data[8]
                    d_opt.id = data[9]
                    for(i=0; i<rad.length; i++){
                        rad[i].id = data[1]
                    }
                    clear_opt.onclick=()=>{
                        for(i=0; i<rad.length; i++){
                            rad[i].checked = false;
                        }
                    }
                    
                    sve_nxt.onclick=()=>{
                        var chos="Not attempted"
                        for(i=0; i<rad.length; i++){
                            if(rad[i].checked){
                                chos = rad[i].value
                            }
                        }
                        var data = {
                            "question_no": question.id,
                            "a": a_opt.id,
                            "b": b_opt.id,
                            "c": c_opt.id,
                            "d": d_opt.id,
                            "chosen": chos
                        }
                        localStorage.setItem(question.id, JSON.stringify(data))
                        getQuestion("82023040600001")
                    }
                }
                
            });
    }
 </script>
 </html>